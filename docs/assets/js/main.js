"use strict";const inputSearch=document.querySelector(".js_input"),button=document.querySelector(".js_button"),showsList=document.querySelector(".js_shows_list"),form=document.querySelector(".js_form"),favoriteSidebar=document.querySelector(".js_fav_list"),favoritesContainer=document.querySelector(".js_favorites_container");let tvShows=[],favoritesTvShows=[];
//!ARRAYS
function paintShows(){let t="",e="";for(const s of tvShows){e=void 0!==favoritesTvShows.find(t=>t.show.id===s.show.id)?"selected":"",t+=`<li class="main__section--shows-list__item js_show ${e}" id="${s.show.id}">`,t+='<div class="show__container ">',null==s.show.image?t+=`<img src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="${s.show.name}">`:t+=`<img src="${s.show.image.medium}" alt="${s.show.name}">`,t+=`<h3>${s.show.name}</h3>`,t+="</div>",showsList.innerHTML=t}listenList()}function handleSearch(){fetch("https://api.tvmaze.com/search/shows?q="+inputSearch.value).then(t=>t.json()).then(t=>{tvShows=t,paintShows()})}
//! END GET INFO FROM API
function formPreventD(t){t.preventDefault()}
//! END NO SUBMIT
function listenList(){const t=document.querySelectorAll(".js_show");for(const e of t)e.addEventListener("click",listenerfav),paintFavoriteShows()}function listenerfav(t){const e=t.currentTarget,s=parseInt(e.id),o=tvShows.find(t=>t.show.id===s),i=favoritesTvShows.findIndex(t=>t.show.id===s);-1===i?favoritesTvShows.push(o):favoritesTvShows.splice(i,1),setLocalStorage(),0===favoritesTvShows.length?favoritesContainer.classList.add("hidden"):favoritesContainer.classList.remove("hidden"),paintFavoriteShows(),paintShows()}
//! END ADD TO FAVORITES
function paintFavoriteShows(){let t="";for(const e of favoritesTvShows)t+=`<li class="main__aside--container__list--item js_fav_show" id="${e.show.id}">`,t+='<div class="main__aside--container__list--item__container">',null==e.show.image?t+=`<img class="main__aside--container__list--item__image" src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="${e.show.name}">`:t+=`<img class="main__aside--container__list--item__image" src="${e.show.image.medium}" alt="${e.show.name}">`,t+=`<h3>${e.show.name}</h3>`,t+='<input type="button" class="js_fav_button fav_button>"',t+="</div>",favoriteSidebar.innerHTML=t}
//! END PAINT FAVORITES SIDEBAR
function getLocalStorage(){const t=localStorage.getItem("shows");null===t?favoritesTvShows=[]:(favoritesTvShows=JSON.parse(t),paintFavoriteShows()),0===favoritesTvShows.length?favoritesContainer.classList.add("hidden"):favoritesContainer.classList.remove("hidden")}function setLocalStorage(){localStorage.setItem("shows",JSON.stringify(favoritesTvShows))}
//! END LOCALSTORAGE
button.addEventListener("click",handleSearch),form.addEventListener("submit",formPreventD),getLocalStorage();const favButton=document.querySelector(".js_fav_button");function DeleteFav(){}