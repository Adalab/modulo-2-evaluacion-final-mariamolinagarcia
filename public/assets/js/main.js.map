{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconst inputSearch = document.querySelector('.js_input');\nconst button = document.querySelector('.js_button');\nconst showsList = document.querySelector('.js_shows_list');\nconst form = document.querySelector('.js_form');\nconst favoriteSidebar =document.querySelector('.js_fav_list');\nconst favoritesContainer =document.querySelector('.js_favorites_container');\n\n// * TRAER LOS ITEMS DEL API Y PINTARLOS EN EL LISTADO\n\n    //creo un array vacío para llenarlo con el fecth al traer el listado de la API\nlet tvShows=[];\n\nlet favoritesTvShows=[];\n\n    //esta función es para que añada el listado al ul del html\n function paintShows (){      \n    let html= '';\n\n    //hago un bucle para recorrer todos los items que devuelve la API\n    for (const show of tvShows) {\n        \n        html+= `<li class=\"main__section--shows-list__item js_show\" id=\"${show.show.id}\">`;\n        html+=`<div class=\"show__container\">`;         \n        \n        //aquí hago un condicional para que ponga una imagen alternativa si no tiene imagen desde la API\n       if(show.show.image == null){\n            \n           html+=`<img src=\"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\" alt=\"${show.show.name}\">`;  \n        }else{\n           html+=`<img src=\"${show.show.image.medium}\" alt=\"${show.show.name}\">`;\n        }; \n    \n        html+=`<h3>${show.show.name}</h3>`;         \n        html+=`</div>`;\n        showsList.innerHTML = html;\n         } \n\n         listenList();\n    }\n\n // este es el evento en botón para que haga el fetch y salga la búsqueda.\nbutton.addEventListener('click' , handleSearch);     \n\n//función manejadora: hace la solicitud a la API y me pinta el resultado\nfunction handleSearch (){\n    \n    fetch(`https://api.tvmaze.com/search/shows?q=${inputSearch.value}`)     \n    .then((response) => response.json())\n    .then(data => {\n\n        tvShows = data;\n        \n        paintShows();\n    });\n\n}\n    // esta función es para que no se envíe el formulario y por tanto no recargue la página\nfunction formPreventD (event){\n    event.preventDefault();\n}\n\nform.addEventListener('submit' , formPreventD);\n\n// ! ACABA PARTE DE PINTAR EL GRID\n\n\n// *   FAVORITOS\n\n// es favorito?\n\n\n\n// aquí traigo todos los elemenos <li> y les añado un evento click\n function listenList(){\n    const showLi = document.querySelectorAll('.js_show');\n\n    for (const itemShow of showLi) {\n        itemShow.addEventListener('click' , listenerfav);  \n        paintFavoriteShows ();\n        \n    }\n\n}\n\nfunction listenerfav(event){\n    const selectedLi = event.currentTarget;\n    const selectedShow = parseInt(selectedLi.id);\n    const favclicked = tvShows.find((tvshow)=>{\n    \n        return tvshow.show.id === selectedShow;\n\n    });\nconsole.log(favclicked);\n\n    const favoriteFound = favoritesTvShows.findIndex((fav)=>{\n        return fav.show.id === selectedShow;\n    \n});\nconsole.log(favoriteFound);\n\n    if(favoriteFound === -1){\n        favoritesTvShows.push(favclicked);\n        selectedLi.classList.add('selected');\n        \n       \n    }else{\n        favoritesTvShows.splice(favoriteFound, 1);\n        selectedLi.classList.remove('selected'); \n        \n    };\n    setLocalStorage();\n   \nconsole.log(favoritesTvShows);\n\n    if(favoritesTvShows.length === 0){\n        favoritesContainer.classList.add('hidden');\n    }else{\n        favoritesContainer.classList.remove('hidden');\n    }\npaintFavoriteShows ();\n}\n\n\n//showsList.addEventListener('click' , listenList);\n\n\n//! fin añadir a favoritos\n\n//* sidebar favoritos\n\nfunction paintFavoriteShows (){      \n    let html= '';\n\n    for (const favShow of favoritesTvShows) {\n        \n        html+= `<li class=\"main__aside--container__list--item js_fav_show\" id=\"${favShow.show.id}\">`;\n        \n        html+=`<div class=\"main__aside--container__list--item__container\">`;         \n        \n       \n       if(favShow.show.image == null){\n            \n           html+=`<img class=\"main__aside--container__list--item__image\" src=\"https://via.placeholder.com/210x295/ffffff/666666/?text=TV\" alt=\"${favShow.show.name}\">`;  \n        }else{\n           html+=`<img class=\"main__aside--container__list--item__image\" src=\"${favShow.show.image.medium}\" alt=\"${favShow.show.name}\">`;\n        }; \n    \n        html+=`<h3>${favShow.show.name}</h3>`;         \n        html+=`</div>`;\n        favoriteSidebar.innerHTML = html;\n         }\n}\n\nfunction getLocalStorage(){\n    const localStorageShows = localStorage.getItem('shows');\n\n    if(localStorageShows === null){\n       favoritesTvShows = [];\n    }else{\n        favoritesTvShows = JSON.parse(localStorageShows);\n        \n        paintFavoriteShows();\n    }\n\n    if(favoritesTvShows.length === 0){\n        favoritesContainer.classList.add('hidden');\n    }else{favoritesContainer.classList.remove('hidden');\n    }\n}\ngetLocalStorage();\n\nfunction setLocalStorage(){\n    localStorage.setItem('shows' ,JSON.stringify(favoritesTvShows));\n}\n"]}